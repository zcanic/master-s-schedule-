# 🚀 Master's Schedule - zcanic Pro: 未来升级演进路线图

基于当前版本稳健的 Local-First 架构和创新的数据可视化能力，为了进一步提升实用性、可玩性及极客体验，特制定以下未来功能演进与升级路径。

## 当前基线说明 (避免歧义)

- 当前项目的产品方向确实偏向 PWA/移动端体验，但代码层面尚未完成完整 PWA 落地。
- 现状是：已具备 `base` 路径、移动端 viewport、Local-First 存储与离线可用的数据模型。
- 尚缺关键能力：`manifest` 文件、Service Worker 生成与注册、缓存策略配置、安装图标链路。
- 因此本文中的 PWA 条目属于"优先级最高的落地任务"，而非"已完成能力"。

---

## 📅 阶段一：实用性与原生体验跃升 (P0 - 高优推荐)

本阶段聚焦于解决用户“查看”与“被提醒”的最核心痛点，让 Web 应用具备媲美原生 App 的体验。

### 1. `.ics` 日历订阅级导出 (iCalendar Export)
*   **痛点**：用户无法在系统的负一屏、手表或原生日历组件中直接查看课表，无法享受系统级强提醒。
*   **功能描述**：
    *   增加“开学基准日”全局设置（如 `2026-03-02`）。
    *   通过算法将 1-16 周的二维课表，降维并映射为绝对时间戳。
    *   生成标准 `.ics` 格式文件，支持一键下载并导入 Apple Calendar / Google Calendar / Outlook。
*   **技术栈**：纯前端拼接 RFC 5545 规范字符串，或使用 `ics` npm 包。

### 2. PWA (渐进式 Web 应用) 全面支持
*   **痛点**：每次查看需打开浏览器、输入 URL，且受制于浏览器 UI 边框。
*   **功能描述**：
    *   配置 `manifest.json` 与 `Service Worker`，实现离线缓存策略。
    *   支持用户将网页“添加到主屏幕”，以全屏无边框形式独立运行。
*   **技术栈**：`vite-plugin-pwa`。

### 3. 动态时间轴与上课倒计时 (Live Countdown)
*   **痛点**：看课表需人工心算“现在是第几节、下一节还有多久”。
*   **功能描述**：
    *   结合当前系统时间，在主页顶部新增实时状态栏 (类似 Dynamic Island 灵动岛)。
    *   显示状态流转：`🟢 正在上课: [课程名] (剩 20 分钟)` -> `⏳ 课间休息: 前往 [地点]` -> `🚀 下一节: [课程名]`。

---

## 🧠 阶段二：数据流转与效率工具拓展 (P1 - 核心进阶)

本阶段聚焦于如何更轻松地“录入数据”以及如何将“课表”扩展为“学业管理中心”。

### 4. 智能导入引擎 (Smart Import)
*   **痛点**：手动在 Data Editor 中填写或导入 CSV 对于普通非极客用户门槛过高。
*   **功能描述**：
    *   **源码解析**：允许用户粘贴特定教务系统（如正方、URP等）的 HTML 源码，通过正则解析一键生成 JSON。
    *   **OCR 识别 (探索)**：集成 `Tesseract.js`，用户上传课表截图，自动提取课程与周次。

### 5. 课程级待办与 DDL 追踪 (Course-linked Todo)
*   **痛点**：课表仅记录了“上课时间”，未记录围绕课程产生的“作业/展示/考试”等生命周期。
*   **功能描述**：
    *   点击课程弹出的模态框内，新增 `Assignments (任务)` 面板。
    *   允许用户为单门课程挂载带有具体 Deadline 的微型 Todo 列表。
    *   数据结构平滑升级，向下兼容旧版 localStorage。

### 6. 多学期归档管理 (Semester Archive)
*   **痛点**：当前单一 `zcanic_courses_v7` 键值限制了历史数据的留存。
*   **功能描述**：
    *   在 Data Management 面板增加“学期/版本库”概念。
    *   支持保存 `2025秋`、`2026春` 等多个快照，并允许用户无缝切换当前激活的学期，或对比不同学期的课业压力 (Load Analysis)。

---

## 🎨 阶段三：视觉、社交与个性化表达 (P2 - 体验打磨)

本阶段聚焦于“好玩”和“好看”，发挥前端渲染的极致优势。

### 7. 暗黑模式与主题引擎 (Dark Mode & Theming)
*   **功能描述**：
    *   集成 Tailwind 的 `dark:` 变体，支持跟随系统 (System Preference) 自动切换或手动 Toggle。
    *   允许用户自定义主色调 (Primary Color)，甚至上传背景壁纸，结合 CSS Backdrop-filter 实现毛玻璃拟物化。

### 8. Void Drop 只读分享与社交时间匹配 (Read-only Sync)
*   **痛点**：Void Drop 目前为双向覆盖，分享 Key 存在数据被他人篡改的风险。
*   **功能描述**：
    *   **安全分享**：生成只读的 Void Key 或基于 URL 的 Base64 压缩分享链接。
    *   **空闲比对 (空闲雷达)**：读取他人的只读课表后，在 UI 上高亮显示“你们俩共同没有课的 Slot”，方便约饭、组队或开会。

### 9. 唯美海报生成 (Export as Image)
*   **功能描述**：
    *   在 Banner 区域新增“📸 导出海报”按钮。
    *   将当前的 Schedule Grid 转换为高分辨率的图片，并添加精美边框、项目水印或用户的专属名言，方便社交平台分享。
*   **技术栈**：`html2canvas` 或 `dom-to-image`。

---

## 🛠️ 技术重构储备 (Tech Debt & Refactor)

*   **状态管理降维/升维**：如果引入多学期和 Todo，当前的自定义 `useCoursesStore` Hook 可能显得吃力，可考虑迁移至标准 `Zustand`。
*   **PaaS 迁移**：若 Void Drop 流量增加，目前的 Cloudflare Workers KV 可能会受限。可预留接口，支持配置自定义的后端 Endpoint（如 Supabase / Vercel KV）。
*   **i18n 国际化**：抽取中文硬编码，引入 `react-i18next`，支持多语言切换。
